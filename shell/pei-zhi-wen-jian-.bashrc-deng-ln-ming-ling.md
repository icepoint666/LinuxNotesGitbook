# 配置文件——.bashrc等，ln命令

很多程序的配置都是通过纯文本格式的被称作_点文件_的配置文件来完成的（之所以称为点文件，是因为它们的文件名以 `.` 开头，例如 `~/.vimrc`。也正因为此，它们默认是隐藏文件，`ls`并不会显示它们）。

shell 的配置也是通过这类文件完成的。在启动时，您的 shell 程序会读取很多文件以加载其配置项。根据 shell 本身的不同，您从登陆开始还是以交互的方式完成这一过程可能会有很大的不同。

对于 `bash`来说，在大多数系统下，您可以通过编辑 `.bashrc` 或 `.bash_profile` 来进行配置。在文件中您可以添加需要在启动时执行的命令，例如上文我们讲到过的别名，或者是您的环境变量。

实际上，很多程序都要求您在 shell 的配置文件中包含一行类似 `export PATH="$PATH:/path/to/program/bin"` 的命令，这样才能确保这些程序能够被 shell 找到。

还有一些其他的工具也可以通过_点文件_进行配置：

* `bash` - `~/.bashrc`, `~/.bash_profile`
* `git` - `~/.gitconfig`
* `vim` - `~/.vimrc` 和 `~/.vim` 目录
* `ssh` - `~/.ssh/config`
* `tmux` - `~/.tmux.conf`

我们应该如何管理这些配置文件呢

### 版本控制来管理

**使用场景：**我们有一个项目，项目需要配置很多东西，因为东西过多，所以项目开发者直接写了一个bash\_profile文件。

目的就是希望使用者使用这个项目时，直接将bash\_profile替换掉.bashrc就可以完成配置

最优雅的替换方法就是建立一个dotfiles仓库

目录情况类似这样

* ~
  * .bashrc
  * .vimrc
  * dotfiles
    * bash\_profile
    * vim\_profile

使用的时候只需要使用`ln -s` 来symlink

```cpp
$ ln -s .bashrc dotfiles/bash_profile
```

相当于很多应用本身要访问.bashrc，然后直接看到绕道访问dotfiles/bash\_profile即可

这么做有如下好处：

* **安装简单**: 如果您登陆了一台新的设备，在这台设备上应用您的配置只需要几分钟的时间；
* **可以执行**: 您的工具在任何地方都以相同的配置工作
* **同步**: 在一处更新配置文件，可以同步到其他所有地方
* **变更追踪**: 您可能要在整个程序员生涯中持续维护这些配置文件，而对于长期项目而言，版本历史是非常重要的

### 配置文件的痛点：并不能在多种设备上生效

例如，如果您在不同设备上使用的操作系统或者 shell 是不同的，则配置文件是无法生效的。或者，有时您仅希望特定的配置只在某些设备上生效。

**有一些技巧可以轻松达成这些目的**。如果配置文件 if 语句，则您可以借助它针对不同的设备编写不同的配置。例如，您的 shell 可以这样做：

```bash
if [[ "$(uname)" == "Linux" ]]; then {do_something}; fi

# 使用和 shell 相关的配置时先检查当前 shell 类型
if [[ "$SHELL" == "zsh" ]]; then {do_something}; fi

# 您也可以针对特定的设备进行配置
if [[ "$(hostname)" == "myServer" ]]; then {do_something}; fi
```



